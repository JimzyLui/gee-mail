<html>

<head>
	<script src="js/mail-generator.js"></script>
	<link href="css/style.css" rel="stylesheet" media="screen">
	<script>
		function formatDate(dte) {
			return dte.getMonth() + 1 + '/' + dte.getDate() + '/' + dte.getFullYear() + '  ' +
				dte.getHours() + ':' + dte.getMinutes();
			// return dte.getFullYear();
		}
		function toggleVisibility() {
			if (this.style.visibility = "hidden") {
				this.style.visibility = 'visible';
			} else {
				this.style.display = 'none';
			}
		}
		window.onload = function () {
			// ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
			// We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
			// var arrMessages = [];
			var iMsgCounter = 0;
			var arrTitles = ["Date", "Subject", "Sender"];
			var main = document.getElementById('main');
			var table = document.createElement('table');
			table.id = 'mailbox';
			var ctr = document.createElement('p');
			ctr.id = 'ctr';
			main.appendChild(table);
			main.appendChild(ctr);
			var thead = document.createElement('thead');
			var headerRow = document.createElement('tr');
			for (var i = 0; i < arrTitles.length; i += 1) {
				var th = document.createElement('th');
				th.innerHTML = arrTitles[i];
				headerRow.appendChild(th);
			}
			thead.appendChild(headerRow);
			table.appendChild(thead);
			var tbody = document.createElement('tbody');
			setInterval(
				function () {
					var msg = getNewMessage();
					iMsgCounter++;
					ctr.innerHTML = iMsgCounter + ' messages';
					var row1 = document.createElement('tr');
					var row2 = document.createElement('tr');
					var tdDate = document.createElement('td');
					var tdSender = document.createElement('td');
					var tdSubject = document.createElement('td');
					var tdBody = document.createElement('td');
					// tdDate.innerHTML = msg.date;
					tdDate.innerHTML = formatDate(msg.date);
					tdSender.innerHTML = msg.sender;
					tdSubject.innerHTML = msg.subject;
					tdBody.innerHTML = msg.body;
					row1.appendChild(tdDate);
					row1.appendChild(tdSender);
					row1.appendChild(tdSubject);
					row1.className = 'msgHeader';
					row1.onclick = 'toggleVisibility()';
					tdBody.colSpan = "3";
					row2.appendChild(tdBody);
					row2.className = 'msgBody'; row2.onclick = 'toggleVisibility()';

					// row2.style.display = "none";
					tbody.appendChild(row1);
					tbody.appendChild(row2);
					table.appendChild(tbody);


				}, 3000
			);


		};
	</script>
</head>

<body>
	<div class="container" id="main">
	</div>
</body>

</html>